/*!
 * Ashe v0.0.1
 * Powered by TFCloud.
 */

!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=85)}({0:function(t,e,i){function n(){var t=this;this.defaultOptions={isMobile:!1,isCaptcha:!0,onSendRequest:function(){t.destroy()},opacity:.8,zIndex:1e3,width:250,height:192}}i(1),n.prototype.setOptions=function(t){this.options=$.extend(!1,{},this.defaultOptions,t),this._setModal()},n.prototype.show=function(){var t=this.modal?this.modal:this._getModalElem(),e=this.mask?this.mask:this._getMaskElem(),i=window.getComputedStyle(t).display;document.getElementById("mask")?"none"===i&&(t.style.display="block",e.style.display="block"):(document.body.appendChild(e),document.body.appendChild(t),t.style.display="block",e.style.display="block"),document.addEventListener("click",this.removeModal.bind(this))},n.prototype.removeModal=function(t){t.target===this.mask&&this.destroy()},n.prototype.hide=function(){var t=this.mask,e=this.modal;t.style.display="none",e.style.display="none"},n.prototype._setModal=function(){var t=this.modal?this.modal:this._getModalElem();this._setModalContent(t)},n.prototype._getMaskElem=function(){var t=document.getElementById("modal-mask");t||(t=document.createElement("div"),t.id="modal-mask");var e="position: fixed; top: 0; left: 0; bottom: 0; right: 0;background: black; opacity:"+this.options.opacity+"; z-index: "+this.options.zIndex+"; display: none;";return t.style.cssText=e,this.mask=t},n.prototype._getModalElem=function(){var t=document.getElementById("modal");t||(t=document.createElement("div"),t.id="modal");var e="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; z-index: "+(this.options.zIndex+1)+"; display: none; border-radius: 2px;";return this.options.isMobile?e+=" width: 375px; height: 194px;":e=e+" width:"+this.options.width+"px; height: "+this.options.height+"px",t.style.cssText=e,this.modal=t},n.prototype._setModalContent=function(t){var e=this,i=document.createElement("div");i.id="captcha-wrapper",i.style="width: 100%; height: 100%";var n=document.createElement("div");n.id="captcha-text",n.innerHTML="请输入验证码，完成验证",this.options.isMobile?n.style.cssText="margin: 34px 0 11px 46px; line-height: 24px; font-size: 12px; letter-spacing: .55px; color: #333":n.style.cssText="margin: 60px 0 20px 88px; line-height: 30px; font-size: 22px; letter-spacing: 1px; color: #333";var o=document.createElement("div");o.id="captcha-input-wrapper",o.style="height: 42px;";var a=document.createElement("input");a.id="captcha-input",a.type="text";var r="padding: 5px 10px; border: 1px solid #D8D8D8;border-radius: 2px; color: #333; vertical-align: top;";this.options.isMobile?a.style.cssText=r+" width: 176px; margin-left: 46px; line-height: 24px; font-size: 12px;":a.style.cssText=r+" width: 250px; margin-left: 88px; line-height: 30px; font-size: 22px;";var s=(new Date).getTime(),c="/api/tool/captcha?"+String(s).slice(-8),d=new Image;d.src=c;var l="display: inline-block; margin-left: 11px; cursor: pointer;";this.options.isMobile?d.style.cssText=l+" width: 76px; height: 33px;":d.style.cssText=l+" width: 91px; height: 40px;",d.addEventListener("click",this._updateCaptcha);var p=document.createElement("button");p.id="submit-captcha",p.innerHTML="确定";var h="display: block; font-weight: 200; color: #fff; background: #0280DF; border-radius: 2px; border: none; line-height: 28px; outline: none; cursor: pointer;";this.options.isMobile?p.style.cssText=h+" margin: 21px auto; padding: 3.9px 31px 3.1px 31px; font-size: 14px; letter-spacing: 0.33px;":p.style.cssText=h+" margin: 34px auto; padding: 11px 37px 11px 38px; font-size: 18px; letter-spacing: 0.5px;",p.addEventListener("click",function(t){t.preventDefault();var i=document.getElementById("captcha-input").value.trim(),n=document.getElementById("submit-captcha");$(n).prop("disabled",!0),e.options.onSendRequest(i,e.showTip.bind(e))}),o.appendChild(a),o.appendChild(d),i.appendChild(n),i.appendChild(o),i.appendChild(p),t.appendChild(i)},n.prototype._updateCaptcha=function(t){var e=(new Date).getTime(),i="/api/tool/captcha?"+String(e).slice(-8);t.target.src=i},n.prototype.showTip=function(t,e,i){this.destroy();var n=document.createElement("div");n.id="submit-tip";var o=document.createElement("img");o.id="submit-tip-icon",o.src=t.tipIconSrc;var a=document.createElement("div");a.id="submit-tip-content-wrapper";var r=document.createElement("div");r.id="submit-tip-title",r.innerHTML=t.tipTitle;var s=document.createElement("div");s.id="fail"===i?"submit-tip-fail-content":"submit-tip-success-content",s.innerHTML=t.tipContent,n.appendChild(o),n.appendChild(a),a.appendChild(r),a.appendChild(s),e.appendChild(n),this.options.isMobile||setTimeout(function(){$(n).addClass("enter")},150),setTimeout(function(){$(n).removeClass("enter"),setTimeout(function(){e.removeChild(n)},800)},5e3)},n.prototype.destroy=function(){this.mask&&(document.body.removeChild(this.mask),document.body.removeChild(this.modal),this.mask=null,this.modal=null),document.removeEventListener("click",this.destroy)},t.exports=n},1:function(t,e){},85:function(t,e,i){i(86),$(function(){function t(t){E.blur(),O.forEach(function(t){t.checked=!1}),O[$(t.target).data("index")].check()}function e(t){s(t.target)}function n(t){var e=/^((1[3,5,8][0-9])|(14[5,7])|(17[0,6,7,8])|(19[7]))\d{8}$/;s(t.target,e)}function o(t){var e=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/;s(t.target,e)}function a(t){s(t.target)}function r(t){var e=$(".class-location-field .message");""!==E.filter(":checked").val().trim()?(e.find(".correct-msg").show(),e.find(".error-msg").hide()):(e.find(".error-msg").show(),e.find(".correct-msg").hide())}function s(t,e){var i=$(t),n=i.next(".message"),o=i.val().trim();e?e.test(o)?(i.addClass("input-correct-border").removeClass("input-error-border"),n.find(".correct-msg").show(),n.find(".error-msg").hide()):(i.addClass("input-error-border").removeClass("input-correct-border"),n.find(".error-msg").show(),n.find(".correct-msg").hide()):""!==o?(i.addClass("input-correct-border").removeClass("input-error-border"),n.find(".correct-msg").show(),n.find(".error-msg").hide()):(i.addClass("input-error-border").removeClass("input-correct-border"),n.find(".error-msg").show(),n.find(".correct-msg").hide())}function c(t){t.preventDefault();var e=b.val().trim(),i=k.val().trim(),n=w.val().trim(),o=C.val().trim(),a=$("[name=location]:checked").val();if(!e)return b.blur(),void b.focus();if(!n)return w.blur(),void w.focus();if(!i)return k.blur(),void k.focus();if(!o)return C.blur(),void C.focus();a||(E.blur(),E.focus());var r=document.documentElement.clientWidth<=960;g.setOptions({isMobile:r,opacity:.2,width:550,height:296,isCaptcha:!0,onSendRequest:d}),g.show()}function d(t,e){var i=b.val().trim(),n=k.val().trim(),o=w.val().trim(),a=C.val().trim(),r=$("[name=location]:checked").val(),s={nickname:i,email:n,phone:o,company:a,location:r,captcha:t};$.ajax({type:"POST",url:"/apply/api/train",data:s}).done(function(){var t={tipIconSrc:"/static/assets/page-views/train/train-apply/checked.png",tipTitle:"申请成功",tipContent:"同方有云已收到您的申请"},i=document.getElementsByClassName("main-content")[0];e(t,i,"success")}).fail(function(){var t={tipIconSrc:"/static/assets/page-views/train/train-apply/warning.png",tipTitle:"申请失败",tipContent:"同方有云没有收到您的申请"},i=document.getElementsByClassName("main-content")[0];e(t,i,"fail")})}function l(t){h(I,O)}function p(t){var e,i=t.pageX,n=t.pageY,o=$(t.target).offset(),a=o.left,r=o.top,s=i-a,c=n-r,d=document.documentElement.clientWidth;d<=955&&(e=m(I,d),s/=e.w,c/=e.h),$.each(O,function(t,e){if(s>=e.x&&s<=e.x+e.w&&c>=e.y&&c<=e.y+e.h)return O.forEach(function(t){t.checked=!1}),O[t].check(),void E.eq(t).prop("checked",!0)})}function h(t,e){var i=t.getContext("2d"),n=document.documentElement.clientWidth;f(t,n),n<=955&&u(t,n);var o=t.width,a=t.height;i.mozImageSmoothingEnabled=!1,i.webkitImageSmoothingEnabled=!1,i.msImageSmoothingEnabled=!1,i.imageSmoothingEnabled=!1,i.clearRect(0,0,o,a),i.font="20px PingFangSC-Regular",i.textAlign="center",i.fillStyle="#666",i.drawImage(S,0,0,880,685),e.forEach(function(t){t.drawCity(i)})}function u(t,e){var i=m(t,e);t.getContext("2d").scale(i.w,i.h)}function m(t,e){return{w:Number((t.width/880).toFixed(2)),h:Number((t.height/685).toFixed(2))}}function f(t,e){if(e>=956)return t.width=880,void(t.height=685);var i=Number((.92*e).toFixed(4));t.width=i+5,t.height=Number((i/z).toFixed(4))}function x(t,e){this.name=t,this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h,this.tx=e.tx,this.ty=e.ty,this.cx=e.cx,this.cy=e.cy,this.checked=!1}var y=i(0),g=new y,v=$("#application-form"),b=v.find("#name"),w=v.find("#phone"),k=v.find("#email"),C=v.find("#company"),E=v.find("[name=location]"),T=v.find("#submitBtn");b.on("blur",e),w.on("blur",n),k.on("blur",o),C.on("blur",a),E.on("change",t),E.on("blur",r),T.on("click",c),$(window).on("resize",l);for(var M,I=v.find("#class-map")[0],z=1.2847,S=new Image,_=new Image,A=new Image,D=[S,_,A],B=0,F=0;F<3;F++)D[F].onload=function(){B++},D[F].onerror=function(){console.log("图片加载失败")};S.src="/static/assets/page-views/train/train-apply/map.jpg",_.src="/static/assets/page-views/train/train-apply/default.jpg",A.src="/static/assets/page-views/train/train-apply/selected.jpg",$(I).on("click",p);var L=[];$(".class-location-field ul li label").each(function(t,e){L.push($(e).text())});var O=new Array,Z=[{x:642,y:210,w:50,h:50,tx:667,ty:230,cx:649,cy:231},{x:728,y:445,w:80,h:30,tx:785,ty:468,cx:730,cy:444},{x:672,y:265,w:80,h:30,tx:725,ty:288,cx:669,cy:263},{x:417,y:456,w:50,h:60,tx:443,ty:504,cx:424,cy:453},{x:775,y:120,w:100,h:30,tx:836,ty:143,cx:772,cy:119},{x:572,y:308,w:50,h:50,tx:597,ty:328,cx:580,cy:330},{x:665,y:400,w:50,h:60,tx:690,ty:424,cx:673,cy:425},{x:653,y:320,w:80,h:30,tx:705,ty:343,cx:651,cy:320},{x:522,y:382,w:50,h:60,tx:549,ty:432,cx:530,cy:380},{x:521,y:608,w:80,h:30,tx:580,ty:630,cx:523,cy:607}];for(F=0;F<10;F++)O.push(new x(L[F],Z[F]));M=setInterval(function(){3===B&&(h(I,O),clearInterval(M))},150),x.prototype.drawCity=function(t){var e;t.save(),this.checked?(t.fillStyle="#0280DF",t.font="22px PingFangSC-Regular",e=A):e=_,t.fillText(this.name,this.tx,this.ty),t.drawImage(e,this.cx,this.cy,34,34),t.restore()},x.prototype.check=function(){this.checked||(this.checked=!0,h(I,O))}})},86:function(t,e){}});